<%- include('../partials/header') %>

<% genres.forEach(genre => { %>
    <% let filteredBooks = books.filter(book => book.genre === genre && !book.haveRead); %>
    <% if (filteredBooks.length > 0) { %>
        <h2 class="text-white text-center mb-4 mt-4 text-3xl font-extrabold leading-none tracking-tight"><%= genre %></h2>
        <ul class="mt-3 bg-gray-800 rounded w-1/2 mx-auto p-3">
            <% filteredBooks.forEach(book => { %>
                <li class="text-center">
                    <a href="/books/<%= book._id %>" class="text-white"><%= book.title %>
                        <img src="<%= book.image %>" alt="<%= book.title %>" class="w-30 h-30 rounded-lg mx-auto mt-2 mb-2">
                        <span>
                            <% book.reviews.forEach(review => { %>
                                <% for (let i = 0; i < review.rating; i++) { %>
                                    <i class="fa-solid fa-star ml-1"></i>
                                <% } %>
                            <% }) %>
                        </span>
                    </a>
                </li>
            <% }) %>
        </ul>
    <% } %>
<% }) %>

<%- include('../partials/footer') %>
